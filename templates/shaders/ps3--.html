<script src="https://xemantic.github.io/shader-web-background/dist/shader-web-background.min.js"></script>

<script type="x-shader/x-fragment" id="Image">
  precision highp float;

  uniform vec2  iResolution;
  uniform float iTime;

  const float PI = 3.1415926535;
  const vec3 COLOR1 = vec3(0., 70., 135.) / 255.;
  const vec3 COLOR2 = vec3(10., 0., 71.) / 255.;

  float wave(vec2 uv, vec4 amps, vec4 freqs, vec4 offset) {
      float time = iTime*.3;

      float x = uv.x;
      float y = 0.;
      y += amps.x * sin(freqs.x * x + time + offset.x);
      y += amps.y * sin(freqs.y * x + time + offset.y);
      y += amps.z * sin(freqs.z * x + time + offset.z);
      y += amps.w * sin(freqs.w * x + time + offset.w);

      float blur = .025;

      float top_wave = smoothstep(y + blur, y, uv.y);
      float bottom_wave = smoothstep(y - 1., y, uv.y) * .4;

      return top_wave * bottom_wave;
  }

  void mainImage( out vec4 fragColor, in vec2 fragCoord ) {
    vec2 uv = 2. * (2. * fragCoord.xy - iResolution.xy) / iResolution.y;

    // backkground color;
    fragColor.rgb = mix(COLOR1, COLOR2, (fragCoord.y / iResolution.y));

    float f = 0.;
    f += wave(uv, vec4(.1, .2, .3, .4), vec4(.1, .4, .8, .3), vec4(1., 1.5, 2., 2.5) * PI);
    f += wave(uv, vec4(.1, .3, .4, .1), vec4(.8, .5, .4, .3), vec4(5., 2., 1., 3.));
    f += wave(uv, vec4(.3, .2, .1, .2), vec4(.9, .5, .1, .1), vec4(1., 2., 2., 3.));

    vec3 col = vec3(.6);

    fragColor += vec4((f) * col * .2, 1.);
  }

  // -- End of Shadertoy code

  void main() {
    mainImage(gl_FragColor, gl_FragCoord.xy);
  }
</script>
<script>
  shaderWebBackground.shade({
    shaders: {
      Image: {
        uniforms: {
          iResolution: (gl, loc, ctx) =>
            gl.uniform2f(loc, ctx.width, ctx.height),
          iTime: (gl, loc) => gl.uniform1f(loc, performance.now() / 1000),
        },
      },
    },
  });
</script>
